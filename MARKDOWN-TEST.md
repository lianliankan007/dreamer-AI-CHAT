# 🎨 Markdown格式测试指南

## 📋 测试消息

复制下面的消息发送给AI，测试Markdown渲染效果：

```
请用Markdown格式回复我以下内容：

# 一级标题
## 二级标题  
### 三级标题

**粗体文本** 和 *斜体文本*

`行内代码示例` 

代码块示例：
```javascript
function sayHello(name) {
    console.log(`Hello, ${name}!`);
    return `欢迎，${name}！`;
}
```

> 这是一个引用块
> 可以包含多行内容

无序列表：
- 第一项
- 第二项
- 第三项

有序列表：
1. 步骤一
2. 步骤二  
3. 步骤三

[链接示例](https://github.com)

---

表格示例：

| 功能 | 状态 | 说明 |
|------|------|------|
| 标题 | ✅ | 支持1-6级标题 |
| 强调 | ✅ | 粗体和斜体 |
| 代码 | ✅ | 行内和块级代码 |
| 列表 | ✅ | 有序和无序列表 |

~~删除线文本~~
```

## 🎯 预期效果

发送上述消息后，AI的回复应该包含：

### ✅ 正确渲染的元素
- **标题层级** - 不同大小和样式的标题
- **文本强调** - 粗体、斜体文本
- **代码高亮** - 彩色语法高亮的JavaScript代码
- **引用块** - 左侧有竖线的引用样式
- **列表** - 格式化的有序/无序列表
- **表格** - 带边框的表格布局
- **链接** - 可点击的蓝色链接
- **分割线** - 水平分割线
- **删除线** - 带删除线的文本

### 🎨 样式特征
- **代码块** - 深色背景，语法高亮
- **引用块** - 左侧蓝色竖线，浅灰背景
- **表格** - 清晰的边框和斑马纹
- **链接** - 蓝色文字，悬停效果

## 🔧 故障排除

### 如果Markdown没有正确渲染：

1. **检查控制台**
   ```javascript
   // 检查依赖是否加载
   console.log('marked:', typeof window.marked);
   console.log('Prism:', typeof window.Prism);
   ```

2. **强制刷新页面**
   - Windows: `Ctrl + F5`
   - Mac: `Cmd + Shift + R`

3. **查看网络面板**
   - 确认 `marked.js` 和 `Prism.js` 已加载
   - 确认 `markdown.css` 已加载

4. **检查控制台错误**
   - 查看是否有JavaScript错误
   - 查看Markdown解析错误日志

### 降级处理

如果Markdown库未加载，系统会自动降级到简单格式化：
- `**粗体**` → **粗体**
- `*斜体*` → *斜体*
- `` `代码` `` → `代码`
- 换行符 → `<br>`

## 📝 技术实现

### 核心组件
- **marked.js** - Markdown解析器
- **Prism.js** - 代码语法高亮
- **markdown.css** - 样式美化
- **XSS防护** - HTML净化

### 安全特性
- 只允许安全的HTML标签
- 过滤危险属性和脚本
- 链接安全检查
- 递归DOM净化

### 性能优化
- 流式渲染支持
- 降级方案处理
- 错误边界保护
- 响应式设计

---

**提示**: 如果AI回复包含代码，应该能看到语法高亮效果！🎨 